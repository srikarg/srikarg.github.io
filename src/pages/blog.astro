---
import ContentLayout from '../layouts/Content.astro'
import PostDetails from '../components/PostDetails.astro'

const posts = (await Astro.glob('./posts/**/*.md'))
  .filter(({ frontmatter }) => !!frontmatter.publishDate)
  .sort(
    (a, b) =>
      new Date(b.frontmatter.publishDate).valueOf() -
      new Date(a.frontmatter.publishDate).valueOf()
  )
---

<ContentLayout>
  <h1 class="font-display text-3xl font-bold uppercase sm:text-5xl">Blog</h1>

  <ul role="list" class="not-prose space-y-6">
    {
      posts.map(post => (
        <li>
          <PostDetails post={post} />
        </li>
      ))
    }
  </ul>
</ContentLayout>
